# Criação de 22 computadores.
set host a0
set host a1
set host a2
set host a3
set host a4
set host a5
set host a6
set host a7
set host a8
set host a9
set host b0
set host b1
set host b2
set host b3
set host b4
set host b5
set host b6
set host b7
set host b8
set host b9
set host c0
set host c1

# Criação de 4 roteadores 
set router r0 11
set router r1 11
set router r3 3
set router r4 3

# Criação dos enlaces ligando os computadores e os roteadores

set duplex-link a0 r0.0 10Mbps 10ms
set duplex-link a1 r0.1 10Mbps 10ms
set duplex-link a2 r0.2 10Mbps 10ms
set duplex-link a3 r0.3 10Mbps 10ms
set duplex-link a4 r0.4 10Mbps 10ms
set duplex-link a5 r0.5 10Mbps 10ms
set duplex-link a6 r0.6 10Mbps 10ms
set duplex-link a7 r0.7 10Mbps 10ms
set duplex-link a8 r0.8 10Mbps 10ms
set duplex-link a9 r0.9 10Mbps 10ms
set duplex-link r0.10 r4.0 10Mbps 10ms

set duplex-link b0 r1.0 10Mbps 10ms
set duplex-link b1 r1.1 10Mbps 10ms
set duplex-link b2 r1.2 10Mbps 10ms
set duplex-link b3 r1.3 10Mbps 10ms
set duplex-link b4 r1.4 10Mbps 10ms
set duplex-link b5 r1.5 10Mbps 10ms
set duplex-link b6 r1.6 10Mbps 10ms
set duplex-link b7 r1.7 10Mbps 10ms
set duplex-link b8 r1.8 10Mbps 10ms
set duplex-link b9 r1.9 10Mbps 10ms
set duplex-link r1.10 r4.1 10Mbps 10ms

set duplex-link r4.2 r3.0 10Mbps 10ms

set duplex-link r3.1 c0 10Mbps 10ms
set duplex-link r3.2 c1 10Mbps 10ms


# Configuração dos hosts: endereço IP do computador, endereço IP do
# roteador padrão e endereço IP do servidor DNS

set ip a0 10.0.0.1 10.0.0.250 192.168.1.1
set ip a1 10.0.1.1 10.0.1.250 192.168.1.1
set ip a2 10.0.2.1 10.0.2.250 192.168.1.1
set ip a3 10.0.3.1 10.0.3.250 192.168.1.1
set ip a4 10.0.4.1 10.0.4.250 192.168.1.1
set ip a5 10.0.5.1 10.0.5.250 192.168.1.1
set ip a6 10.0.6.1 10.0.6.250 192.168.1.1
set ip a7 10.0.7.1 10.0.7.250 192.168.1.1
set ip a8 10.0.8.1 10.0.8.250 192.168.1.1
set ip a9 10.0.9.1 10.0.9.250 192.168.1.1

set ip b0 10.1.0.1 10.1.0.250 192.168.1.1
set ip b1 10.1.1.1 10.1.1.250 192.168.1.1
set ip b2 10.1.2.1 10.1.2.250 192.168.1.1
set ip b3 10.1.3.1 10.1.3.250 192.168.1.1
set ip b4 10.1.4.1 10.1.4.250 192.168.1.1
set ip b5 10.1.5.1 10.1.5.250 192.168.1.1
set ip b6 10.1.6.1 10.1.6.250 192.168.1.1
set ip b7 10.1.7.1 10.1.7.250 192.168.1.1
set ip b8 10.1.8.1 10.1.8.250 192.168.1.1
set ip b9 10.1.9.1 10.1.9.250 192.168.1.1

# ircs e dns
set ip c0 192.168.0.1 192.168.0.250 192.168.1.1
set ip c1 192.168.1.1 192.168.1.250 1.1.1.1

# Configuração dos roteadores: porta, endereço IP [[porta, endereço
# IP] ...]
set ip r0 0 10.0.0.250 1 10.0.1.250 2 10.0.2.250 3 10.0.3.250 4 10.0.4.250 5 10.0.5.250 6 10.0.6.250 7 10.0.7.250 8 10.0.8.250 9 10.0.9.250 10 10.0.10.250

set ip r1 0 10.1.0.250 1 10.1.1.250 2 10.1.2.250 3 10.1.3.250 4 10.1.4.250 5 10.1.5.250 6 10.1.6.250 7 10.1.7.250 8 10.1.8.250 9 10.1.9.250 10 10.1.10.250

set ip r4 0 10.0.10.101 1 10.1.10.101 2 10.250.0.1
set ip r3 0 10.250.0.2 1 192.168.0.250 2 192.168.1.250


# Configuração dos roteadores: rotas (obs.: nos roteadores todas as
# rotas devem ser explı́citas apontando para outro roteador ou para a
# porta. Não há roteador padrão no roteador. Não se preocupe com o
# caso de comunicações com endereços inexistentes na
# rede)
set route r0 10.0.0.0 0 10.0.1.0 1 10.0.2.0 2 10.0.3.0 3 10.0.4.0 4 10.0.5.0 5 10.0.6.0 6 10.0.7.0 7 10.0.8.0 8 10.0.9.0 9 10.0.10.0 10 192.168.0.0 10.0.10.101 192.168.1.0 10.0.10.101

set route r1 10.1.0.0 0 10.1.1.0 1 10.1.2.0 2 10.1.3.0 3 10.1.4.0 4 10.1.5.0 5 10.1.6.0 6 10.1.7.0 7 10.1.8.0 8 10.1.9.0 9 10.1.10.0 10 192.168.0.0 10.1.10.101 192.168.1.0 10.1.10.101

set route r4 10.0.10.0 0 10.1.10.0 1 10.250.0.0 2 10.0.0.0 10.0.10.250 10.0.1.0 10.0.10.250 10.0.2.0 10.0.10.250 10.0.3.0 10.0.10.250 10.0.4.0 10.0.10.250 10.0.5.0 10.0.10.250 10.0.6.0 10.0.10.250 10.0.7.0 10.0.10.250 10.0.8.0 10.0.10.250 10.0.9.0 10.0.10.250 10.1.0.0 10.1.10.250 10.1.1.0 10.1.10.250 10.1.2.0 10.1.10.250 10.1.3.0 10.1.10.250 10.1.4.0 10.1.10.250 10.1.5.0 10.1.10.250 10.1.6.0 10.1.10.250 10.1.7.0 10.1.10.250 10.1.8.0 10.1.10.250 10.1.9.0 10.1.10.250 192.168.0.0 10.250.0.2 192.168.1.0 10.250.0.2

set route r3 10.250.0.0 0 192.168.0.0 1 192.168.1.0 2 10.0.0.0 10.250.0.1 10.0.1.0 10.250.0.1 10.0.2.0 10.250.0.1 10.0.3.0 10.250.0.1 10.0.4.0 10.250.0.1 10.0.5.0 10.250.0.1 10.0.6.0 10.250.0.1 10.0.7.0 10.250.0.1 10.0.8.0 10.250.0.1 10.0.9.0 10.250.0.1 10.1.0.0 10.250.0.1 10.1.1.0 10.250.0.1 10.1.2.0 10.250.0.1 10.1.3.0 10.250.0.1 10.1.4.0 10.250.0.1 10.1.5.0 10.250.0.1 10.1.6.0 10.250.0.1 10.1.7.0 10.250.0.1 10.1.8.0 10.250.0.1 10.1.9.0 10.250.0.1 

# Configuração dos roteadores: tempo para processar 1 pacote, porta,
# tamanho da fila da porta em quantidade de pacotes, [[porta, tamanho
# ...] ...]
set performance r0 100us 0 1000 1 1000 2 1000
set performance r1 20us 0 1000 1 1000 2 1000
set performance r4 100us 0 1000 1 1000 2 1000
set performance r3 20us 0 1000 1 1000 2 1000

set ircc a0 irca0
set ircc a1 irca1
set ircc a2 irca2
set ircc a3 irca3
set ircc a4 irca4
set ircc a5 irca5
set ircc a6 irca6
set ircc a7 irca7
set ircc a8 irca8
set ircc a9 irca9

set ircc b0 ircb0
set ircc b1 ircb1
set ircc b2 ircb2
set ircc b3 ircb3
set ircc b4 ircb4
set ircc b5 ircb5
set ircc b6 ircb6
set ircc b7 ircb7
set ircc b8 ircb8
set ircc b9 ircb9

set ircs c0 ircs
set dnss c1 dns1

set sniffer r3.2 c1 "sniffer-dns"
set sniffer r3.1 c0 "sniffer-ircs"

simulate 0.1 irca0 "CONNECT c0 6667"
simulate 0.1 ircb0 "CONNECT c0 6667"
simulate 0.1 irca1 "CONNECT 192.168.0.1 6667"
simulate 0.1 ircb1 "CONNECT 192.168.0.1 6667"
simulate 0.1 irca2 "CONNECT c0 6667"
simulate 0.1 ircb2 "CONNECT c0 6667"
simulate 0.1 irca3 "CONNECT c0 6667"
simulate 0.1 ircb3 "CONNECT c0 6667"
simulate 0.1 irca4 "CONNECT 192.168.0.1 6667"
simulate 0.1 ircb4 "CONNECT 192.168.0.1 6667"
simulate 0.1 irca5 "CONNECT 192.168.0.1 6667"
simulate 0.1 ircb5 "CONNECT 192.168.0.1 6667"
simulate 0.1 irca6 "CONNECT 192.168.0.1 6667"
simulate 0.1 ircb6 "CONNECT 192.168.0.1 6667"
simulate 0.1 irca7 "CONNECT c0 6667"
simulate 0.1 ircb7 "CONNECT 192.168.0.1 6667"
simulate 0.1 irca8 "CONNECT c0 6667"
simulate 0.1 ircb8 "CONNECT c0 6667"
simulate 0.1 irca9 "CONNECT c0 6667"
simulate 0.1 ircb9 "CONNECT c0 6667"

simulate 0.2 irca0 "USER user_a0"
simulate 0.2 ircb0 "USER user_b0"
simulate 0.2 irca1 "USER user_a1"
simulate 0.2 ircb1 "USER user_b1"
simulate 0.2 irca2 "USER user_a2"
simulate 0.2 ircb2 "USER user_b2"
simulate 0.2 irca3 "USER user_a3"
simulate 0.2 ircb3 "USER user_b3"
simulate 0.2 irca4 "USER user_a4"
simulate 0.2 ircb4 "USER user_b4"
simulate 0.2 irca5 "USER user_a5"
simulate 0.2 ircb5 "USER user_b5"
simulate 0.2 irca6 "USER user_a6"
simulate 0.2 ircb6 "USER user_b6"
simulate 0.2 irca7 "USER user_a7"
simulate 0.2 ircb7 "USER user_b7"
simulate 0.2 irca8 "USER user_a8"
simulate 0.2 ircb8 "USER user_b8"
simulate 0.2 irca9 "USER user_a9"
simulate 0.2 ircb9 "USER user_b9"

simulate 0.3 irca0 "QUIT"
simulate 0.3 ircb0 "QUIT"
simulate 0.3 irca1 "QUIT"
simulate 0.3 ircb1 "QUIT"
simulate 0.3 irca2 "QUIT"
simulate 0.3 ircb2 "QUIT"
simulate 0.3 irca3 "QUIT"
simulate 0.3 ircb3 "QUIT"
simulate 0.3 irca4 "QUIT"
simulate 0.3 ircb4 "QUIT"
simulate 0.3 irca5 "QUIT"
simulate 0.3 ircb5 "QUIT"
simulate 0.3 irca6 "QUIT"
simulate 0.3 ircb6 "QUIT"
simulate 0.3 irca7 "QUIT"
simulate 0.3 ircb7 "QUIT"
simulate 0.3 irca8 "QUIT"
simulate 0.3 ircb8 "QUIT"
simulate 0.3 irca9 "QUIT"
simulate 0.3 ircb9 "QUIT"

finish 0.4
